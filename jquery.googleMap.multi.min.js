/**
 * jQuery Google Map Helper
 * https://github.com/patricknelson/jquery.googleMap.Multi
 *
 * Copyright (c) 2011 Kevin Doyle
 * Copyright (c) 2014 Patrick Nelson
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 **/
(function(e){e.fn.googleMap=function(t){var n={mapType:"roadmap",url:"data.json",styles:[]};t=e.extend(n,t);return this.each(function(){var n=e(this)[0],r,s,o,u,a,f,l,c,h,p,d;switch(t.mapType){case"roadmap":r=google.maps.MapTypeId.ROADMAP;break;case"satellite":r=google.maps.MapTypeId.SATELLITE;break;case"hybrid":r=google.maps.MapTypeId.HYBRID;break;case"terrain":r=google.maps.MapTypeId.TERRAIN;break}s={zoom:8,center:new google.maps.LatLng(0,0),mapTypeId:r,styles:t.styles};o=new google.maps.Map(n,s);d=new google.maps.InfoWindow;e.ajax({type:"GET",dataType:"json",url:t.url,success:function(t){for(i=0;i<t.sets.length;i++){var n=t.sets[i];a=new google.maps.LatLngBounds;for(j=0;j<n.points.length;j++){var r=n.points[j];f=new google.maps.LatLng(r.latlng[0],r.latlng[1]);var s=new google.maps.Marker({map:o,position:f,icon:null});google.maps.event.addListener(s,"click",function(e,t){return function(){d.setContent(t.content);d.open(o,e)}}(s,r));a.extend(s.getPosition())}n.bounds=a}if(t.initialset!==null){for(i=0;i<t.sets.length;i++){if(t.sets[i].setid===t.initialset){o.fitBounds(t.sets[i].bounds);if(t.sets[i].points.length==1){var u=parseInt(t.sets[i].points[0].zoom);setTimeout(function(){o.setZoom(u)},800)}e(".set").removeClass("active");e("#"+t.initialset).addClass("active")}}}else{o.fitBounds(t.sets[0].bounds);setTimeout(function(){o.setZoom(Math.min(o.getZoom(),15))},50);e(".set").removeClass("active");e("#"+t.sets[0].setid).addClass("active")}e(".set").click(function(){curid=e(this).attr("id");for(i=0;i<t.sets.length;i++){if(t.sets[i].setid===curid){o.fitBounds(t.sets[i].bounds);if(t.sets[i].points.length==1){usezoom=parseInt(t.sets[i].points[0].zoom);o.setZoom(usezoom)}else{o.setZoom(Math.min(o.getZoom(),15))}e(".set").removeClass("active");e(this).addClass("active")}}return false})}})})}})(jQuery);
